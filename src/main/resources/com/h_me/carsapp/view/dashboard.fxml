<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.h_me.carsapp.controller.DashboardController"
            stylesheets="@../styles.css"
            styleClass="root-container">

    <!-- Left Sidebar -->
    <left>
        <VBox styleClass="sidebar">
            
            <!-- Brand Header -->
            <HBox styleClass="sidebar-header" alignment="CENTER_LEFT" spacing="12">
                <Label text="ðŸš—" styleClass="sidebar-logo"/>
                <VBox spacing="2">
                    <Label text="H-Me Cars" styleClass="sidebar-brand"/>
                    <Label text="Car Rental Service" styleClass="label-muted" style="-fx-font-size: 11px;"/>
                </VBox>
            </HBox>
            
            <!-- Navigation Section -->
            <VBox spacing="4">
                <VBox.margin>
                    <Insets top="24"/>
                </VBox.margin>
                
                <Label text="NAVIGATION" styleClass="sidebar-section-title"/>
                
                <Button text="ðŸ   Dashboard" 
                        styleClass="sidebar-nav-item, sidebar-nav-item-active"
                        maxWidth="Infinity"
                        alignment="CENTER_LEFT"/>
                
                <Button text="ðŸ“  Dealerships" 
                        onAction="#goToDealerships"
                        styleClass="sidebar-nav-item"
                        maxWidth="Infinity"
                        alignment="CENTER_LEFT"/>
            </VBox>
            
            <!-- Quick Actions -->
            <VBox spacing="4">
                <VBox.margin>
                    <Insets top="24"/>
                </VBox.margin>
                
                <Label text="QUICK ACTIONS" styleClass="sidebar-section-title"/>
                
                <Button text="â†»  Refresh List" 
                        onAction="#loadData"
                        styleClass="sidebar-nav-item"
                        maxWidth="Infinity"
                        alignment="CENTER_LEFT"/>
            </VBox>
            
            <!-- Spacer -->
            <Region VBox.vgrow="ALWAYS"/>
            
            <!-- User Info & Logout -->
            <VBox spacing="16">
                <Region styleClass="divider"/>
                
                <Button text="ðŸšª  Sign Out" 
                        onAction="#handleLogout"
                        styleClass="sidebar-nav-item"
                        maxWidth="Infinity"
                        alignment="CENTER_LEFT"
                        style="-fx-text-fill: #f43f5e;"/>
            </VBox>
            
        </VBox>
    </left>

    <!-- Main Content Area -->
    <center>
        <VBox styleClass="main-content">
            
            <!-- Header Bar -->
            <HBox styleClass="content-header" alignment="CENTER_LEFT">
                <VBox spacing="4">
                    <Label text="Available Vehicles" styleClass="heading"/>
                    <Label text="Browse and rent from our premium car collection" styleClass="label-muted"/>
                </VBox>
                
                <Region HBox.hgrow="ALWAYS"/>
                
                <!-- Search Bar -->
                <HBox styleClass="search-bar" alignment="CENTER_LEFT" spacing="10" prefWidth="320">
                    <Label text="ðŸ”" styleClass="search-icon"/>
                    <TextField fx:id="searchField" 
                               promptText="Search by model or category..."
                               styleClass="search-input"
                               HBox.hgrow="ALWAYS"/>
                    <Button text="Search" 
                            onAction="#handleSearch"
                            styleClass="button"
                            style="-fx-padding: 10 20;"/>
                </HBox>
            </HBox>
            
            <!-- Content Body - Vehicle Table -->
            <VBox styleClass="content-body" VBox.vgrow="ALWAYS">
                <VBox styleClass="card" VBox.vgrow="ALWAYS">
                    
                    <!-- Card Header -->
                    <HBox styleClass="card-header" alignment="CENTER_LEFT">
                        <VBox spacing="4">
                            <Label text="Car Fleet" styleClass="card-title"/>
                            <Label text="Select a vehicle to rent" styleClass="card-subtitle"/>
                        </VBox>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="â†» Refresh" 
                                onAction="#loadData"
                                styleClass="button"
                                style="-fx-padding: 8 16; -fx-font-size: 13px;"/>
                    </HBox>
                    
                    <!-- Table -->
                    <TableView fx:id="vehicleTable" VBox.vgrow="ALWAYS" styleClass="table-view">
                        <VBox.margin>
                            <Insets top="16"/>
                        </VBox.margin>
                        <columns>
                            <TableColumn fx:id="colName" text="Model" prefWidth="280"/>
                            <TableColumn fx:id="colCategory" text="Category" prefWidth="180"/>
                            <TableColumn fx:id="colPrice" text="Daily Price (MAD)" prefWidth="160"/>
                            <TableColumn fx:id="colStatus" text="Status" prefWidth="200"/>
                        </columns>
                    </TableView>
                    
                </VBox>
            </VBox>
            
        </VBox>
    </center>

    <!-- Bottom Action Bar -->
    <bottom>
        <HBox styleClass="footer-bar" alignment="CENTER">
            
            <!-- Date Selection -->
            <HBox spacing="24" alignment="CENTER_LEFT">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="ðŸ“…" style="-fx-font-size: 16px;"/>
                    <VBox spacing="4">
                        <Label text="Start Date" styleClass="label-muted" style="-fx-font-size: 11px;"/>
                        <DatePicker fx:id="startDatePicker" prefWidth="150"/>
                    </VBox>
                </HBox>
                
                <Label text="â†’" style="-fx-font-size: 20px; -fx-text-fill: #64748b;"/>
                
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="ðŸ“…" style="-fx-font-size: 16px;"/>
                    <VBox spacing="4">
                        <Label text="End Date" styleClass="label-muted" style="-fx-font-size: 11px;"/>
                        <DatePicker fx:id="endDatePicker" prefWidth="150"/>
                    </VBox>
                </HBox>
            </HBox>
            
            <Region HBox.hgrow="ALWAYS"/>
            
            <!-- Action Buttons -->
            <HBox spacing="16" alignment="CENTER_RIGHT">
                <Button text="ðŸ“ Locate Dealerships" 
                        onAction="#goToDealerships"
                        styleClass="button"
                        prefHeight="48"/>
                
                <Button text="ðŸ”‘  Rent Selected Car" 
                        onAction="#handleRent"
                        styleClass="button-success"
                        prefHeight="48"
                        style="-fx-padding: 14 32; -fx-font-size: 15px;"/>
            </HBox>
            
        </HBox>
    </bottom>

</BorderPane>
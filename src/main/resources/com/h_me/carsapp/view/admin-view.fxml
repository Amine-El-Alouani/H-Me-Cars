<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.h_me.carsapp.controller.AdminController"
            stylesheets="@../styles.css"
            styleClass="root-container-admin">

    <!-- Admin Header -->
    <top>
        <HBox styleClass="header-bar-admin" alignment="CENTER_LEFT" spacing="16">
            <Label text="ðŸ›¡ï¸" style="-fx-font-size: 28px;"/>
            <VBox spacing="2">
                <Label text="Admin Dashboard" styleClass="header-title"/>
                <Label text="Manage vehicles, reservations and more" styleClass="header-subtitle"/>
            </VBox>
            
            <Region HBox.hgrow="ALWAYS"/>
            
            <HBox spacing="12" alignment="CENTER_RIGHT">
                <Button text="â†» Refresh All" 
                        onAction="#refreshData"
                        styleClass="button"
                        style="-fx-padding: 10 20;"/>
                
                <Button text="ðŸšª Sign Out" 
                        onAction="#handleLogout" 
                        styleClass="button-danger"
                        style="-fx-padding: 10 20;"/>
            </HBox>
        </HBox>
    </top>

    <!-- Tab Pane -->
    <center>
        <TabPane styleClass="tab-pane">
            
            <!-- ==================== MANAGE CARS TAB ==================== -->
            <Tab text="ðŸš—  Manage Cars" closable="false">
                <VBox styleClass="content-body" spacing="20">
                    
                    <!-- Stats Row (Optional Visual Enhancement) -->
                    <HBox spacing="20">
                        <VBox styleClass="stat-card" HBox.hgrow="ALWAYS">
                            <Label text="Total Cars" styleClass="stat-label"/>
                            <Label text="â€”" styleClass="stat-value"/>
                        </VBox>
                        <VBox styleClass="stat-card" HBox.hgrow="ALWAYS">
                            <Label text="Available" styleClass="stat-label"/>
                            <Label text="â€”" styleClass="stat-value" style="-fx-text-fill: #10b981;"/>
                        </VBox>
                        <VBox styleClass="stat-card" HBox.hgrow="ALWAYS">
                            <Label text="In Maintenance" styleClass="stat-label"/>
                            <Label text="â€”" styleClass="stat-value" style="-fx-text-fill: #f59e0b;"/>
                        </VBox>
                        <VBox styleClass="stat-card" HBox.hgrow="ALWAYS">
                            <Label text="Rented" styleClass="stat-label"/>
                            <Label text="â€”" styleClass="stat-value" style="-fx-text-fill: #6366f1;"/>
                        </VBox>
                    </HBox>
                    
                    <!-- Cars Table Card -->
                    <VBox styleClass="card" VBox.vgrow="ALWAYS">
                        
                        <!-- Card Header -->
                        <HBox styleClass="card-header" alignment="CENTER_LEFT">
                            <VBox spacing="4">
                                <Label text="Vehicle Inventory" styleClass="card-title"/>
                                <Label text="Add, edit, or remove vehicles from your fleet" styleClass="card-subtitle"/>
                            </VBox>
                        </HBox>
                        
                        <!-- Table -->
                        <TableView fx:id="carTable" VBox.vgrow="ALWAYS" styleClass="table-view">
                            <VBox.margin>
                                <Insets top="16"/>
                            </VBox.margin>
                            <columns>
                                <TableColumn fx:id="colCarId" text="ID" prefWidth="80"/>
                                <TableColumn fx:id="colModel" text="Model" prefWidth="350"/>
                                <TableColumn fx:id="colStatus" text="Status" prefWidth="180"/>
                            </columns>
                        </TableView>
                        
                    </VBox>

                    <!-- Action Bar -->
                    <HBox styleClass="action-bar" alignment="CENTER_LEFT" spacing="16">
                        
                        <!-- Input Fields -->
                        <VBox spacing="4">
                            <Label text="Model" styleClass="label-muted" style="-fx-font-size: 11px;"/>
                            <TextField fx:id="modelField" 
                                       promptText="e.g., Toyota Corolla" 
                                       prefWidth="200"
                                       styleClass="text-field"
                                       style="-fx-pref-height: 42;"/>
                        </VBox>
                        
                        <VBox spacing="4">
                            <Label text="Category" styleClass="label-muted" style="-fx-font-size: 11px;"/>
                            <TextField fx:id="categoryField" 
                                       promptText="e.g., Sedan" 
                                       prefWidth="150"
                                       styleClass="text-field"
                                       style="-fx-pref-height: 42;"/>
                        </VBox>
                        
                        <VBox spacing="4">
                            <Label text="Price (MAD/day)" styleClass="label-muted" style="-fx-font-size: 11px;"/>
                            <TextField fx:id="priceField" 
                                       promptText="e.g., 350" 
                                       prefWidth="130"
                                       styleClass="text-field"
                                       style="-fx-pref-height: 42;"/>
                        </VBox>

                        <Region HBox.hgrow="ALWAYS"/>

                        <!-- Action Buttons -->
                        <HBox spacing="12" alignment="CENTER_RIGHT">
                            <Button text="âž• Add Car" 
                                    onAction="#handleAddCar" 
                                    styleClass="button-success"
                                    style="-fx-padding: 12 24;"/>
                            
                            <Button text="ðŸ”„ Toggle Status" 
                                    onAction="#handleToggleStatus" 
                                    styleClass="button-warning"
                                    style="-fx-padding: 12 20;"/>
                            
                            <Button text="ðŸ—‘ï¸ Delete" 
                                    onAction="#handleDeleteCar" 
                                    styleClass="button-danger"
                                    style="-fx-padding: 12 20;"/>
                        </HBox>
                        
                    </HBox>
                    
                </VBox>
            </Tab>

            <!-- ==================== RESERVATIONS TAB ==================== -->
            <Tab text="ðŸ“‹  All Reservations" closable="false">
                <VBox styleClass="content-body" spacing="20">
                    
                    <!-- Reservations Table Card -->
                    <VBox styleClass="card" VBox.vgrow="ALWAYS">
                        
                        <!-- Card Header -->
                        <HBox styleClass="card-header" alignment="CENTER_LEFT">
                            <VBox spacing="4">
                                <Label text="Customer Reservations" styleClass="card-title"/>
                                <Label text="View all active and past reservations" styleClass="card-subtitle"/>
                            </VBox>
                            
                            <Region HBox.hgrow="ALWAYS"/>
                            
                            <Button text="â†» Refresh List" 
                                    onAction="#refreshData" 
                                    styleClass="button-primary"
                                    style="-fx-padding: 10 24;"/>
                        </HBox>
                        
                        <!-- Reservations Table -->
                        <TableView fx:id="resTable" VBox.vgrow="ALWAYS" styleClass="table-view">
                            <VBox.margin>
                                <Insets top="16"/>
                            </VBox.margin>
                            <columns>
                                <TableColumn fx:id="colResId" text="Reservation ID" prefWidth="120"/>
                                <TableColumn fx:id="colUserName" text="Customer Name" prefWidth="220"/>
                                <TableColumn fx:id="colUserPhone" text="Phone" prefWidth="160"/>
                                <TableColumn fx:id="colResCarId" text="Car ID" prefWidth="100"/>
                                <TableColumn fx:id="colCost" text="Total Cost (MAD)" prefWidth="150"/>
                            </columns>
                        </TableView>
                        
                    </VBox>
                    
                </VBox>
            </Tab>

        </TabPane>
    </center>

</BorderPane>